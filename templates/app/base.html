<!DOCTYPE html>
<html>
<head>
	
	<title>Dublin City</title>

	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	
	<link rel="shortcut icon" type="image/x-icon" href="docs/images/favicon.ico" />

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css" integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ==" crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js" integrity="sha512-gZwIG9x3wUXg2hdXF6+rVkLF/0Vi9U8D2Ntg4Ga5I5BZpVkVxlJWbSQtXPSiUTtC0TjtGOmxa1AJPuV0CPthew==" crossorigin=""></script>

    <style>
    	.leaflet-popup-content-wrapper {
    		border-radius: 0;
    		background: black;
    		color: white;
    		font-size: 20px;
    	}

    	.leaflet-popup-content {
    		margin: 5px;
    	}

    	.leaflet-popup-tip {
    		background: black;
    	}

    	.leaflet-popup-close-button {
    		display: none;
    	}

    </style>


	
</head>
<body>



<div id="mapid" style="width: 1000px; height: 600px;"></div>
<input type="text" id="current_center" />
<button id="toggleLayer">Toggle</button>
<script>
	// Instantiates a map object given the DOM ID of a <div> element
	// and object literal with map options
	// import {latLng} from "../../static/leaflet/leaflet-src.esm";

    var mymap = L.map('mapid')
	.setView([53.3498, -6.2603], 11);

	L.tileLayer('https://{s}.tile.thunderforest.com/transport-dark/{z}/{x}/{y}.png?', {
		attribution: 'Map Tiles by &copy; <a href="http://www.thunderforest.com/">Thunderforest</a>, &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors ' +
			'<a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
			'Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
		id: 'mapbox/streets-v11'
	}).addTo(mymap);


	L.circle([53.3498, -6.2603], 500, {
		color: 'red',
		fillColor: '#f03',
		weight: 0.5,
		fillOpacity: 0.5
	}).addTo(mymap).bindPopup("Dublin City");

	L.polygon([
		[53.3419, -6.2267],
		[53.3559, -6.3298],
		[53.3193, -6.2320]
	]).addTo(mymap).bindPopup("I am a polygon.");

	L.marker([53.3498, -6.2603]).addTo(mymap).bindPopup("Hi, from Dublin");
	L.marker([53.3419, -6.2267]).addTo(mymap).bindPopup("Hi, from Pearse Street, Dublin");
	L.marker([53.3289, -6.2305]).addTo(mymap).bindPopup("DonnyBrook");


	var greenIcon = L.icon({
    iconUrl: 'tree1.png',
    iconSize:     [32, 37], // size of the icon
    iconAnchor:   [16, 37], // point of the icon which will correspond to marker's location
    popupAnchor:  [0, -30] // point from which the popup should open relative to the iconAnchor
});

	var popup3 = L.popup();

	var blackIcon = L.icon({
    iconUrl: 'marker.svg',
    iconSize:     [32, 37], // size of the icon
    iconAnchor:   [16, 37], // point of the icon which will correspond to marker's location
    popupAnchor:  [0, -30] // point from which the popup should open relative to the iconAnchor
});


	var geojson =
        {"type": "FeatureCollection","features": [{"type": "Feature","properties": {},"geometry": {"type": "LineString","coordinates":
                            [[-6.2505340576171875,53.358543048440765],[-6.288299560546875,53.35362523805683],[-6.28692626953125,53.33374330585105],
                            [-6.257743835449218,53.32328620004726],[-6.227874755859375,53.33640843268809],[-6.249847412109375,53.35751855140597],
                                [-6.260490417480469,53.34768212671975]]}}]};

	var marker1 = L.marker([53.358543048440765, -6.2505340576171875], {
	    icon: greenIcon
    });
	var marker2 = L.marker([53.35362523805683, -6.288299560546875], {
	    icon: greenIcon
    });
	var marker3 = L.marker([53.33374330585105, -6.28692626953125], {
	    icon: greenIcon
    });

	//marker1.addTo(mymap);
	//marker2.addTo(mymap);

    var featureGroup = L.featureGroup([marker1,marker2]).bindPopup('Hola').addTo(mymap);

    mymap.fitBounds(featureGroup.getBounds(), {
       padding: [20,20]
    });

    mymap.on('moveend',function(e) {
        console.log(map.getCenter());
        $('#current_center').val(map.getCenter().lat+','+map.getCenter().lng);
    });

    $(document).on('click','#toggleLayer',function() {
       if(map.hasLayer(featureGroup)) {
           map.removeLayer(featureGroup);
       } else {
           featureGroup.addTo(mymap);
       }
    });


	/*
	var addedGeoJSON = L.geoJSON(geojson, {
        style: function (feature) {
            return {
                color: '#000',
                weight: 2.5
            }
        },
        pointToLayer: function (geoJsonPoint, latlng) {
            return L.marker(latlng, {
                icon: blackIcon
            });
        }
    }).addTo(mymap);

	mymap.fitBounds(addedGeoJSON.getBounds(),{
	    padding: [20,20]
    });

	 */




	// icon with markers
	L.marker([53.3193, -6.2320], {icon:greenIcon}).addTo(mymap).bindPopup('Park!!');
	L.marker([53.33861, -6.26639], {icon:blackIcon}).addTo(mymap).bindPopup(popup);
	//L.marker([53.3289, -6.2305], {icon:greenIcon}).addTo(mymap).bindPopup('Ballsbridge!!');

	var popup2 = L.popup ({
        maxWidth : 400
    })
        .setLatLng([53.3193, -6.2320])
        .setContent('<img src="https://via.placeholder.com/100x50"  />')
        .openOn(mymap);

	var popup = L.popup();

	function onMapClick(e) {
		popup
			.setLatLng(e.latlng)
			.setContent("You clicked the map at " + e.latlng.toString())
			.openOn(mymap);
	}

	mymap.on('click', onMapClick);

</script>



</body>
</html>
